<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>FieldVerify - Visit Verification</title>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <style>
    :root {
      --naukri-blue: #4a90d9;
      --naukri-dark: #2d5f9a;
      --naukri-deeper: #1a3a5c;
      --naukri-light: #e8f1fb;
      --naukri-accent: #357abd;
      --bg: #f5f7fa;
      --card-bg: #ffffff;
      --text-primary: #1a202c;
      --text-secondary: #4a5568;
      --text-muted: #a0aec0;
      --border: #e2e8f0;
      --success: #48bb78;
      --success-bg: #f0fff4;
      --danger: #e53e3e;
      --warning: #ed8936;
      --shadow: 0 2px 12px rgba(0,0,0,0.08);
      --shadow-lg: 0 8px 30px rgba(0,0,0,0.12);
      --radius: 12px;
      --radius-lg: 16px;
      --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
      background: var(--bg);
      color: var(--text-primary);
      min-height: 100vh;
      min-height: 100dvh;
      display: flex;
      flex-direction: column;
    }

    /* Header */
    .header {
      background: linear-gradient(135deg, var(--naukri-dark), var(--naukri-blue));
      padding: 16px 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      box-shadow: 0 2px 10px rgba(45,95,154,0.3);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-logo {
      width: 32px; height: 32px;
      background: rgba(255,255,255,0.2);
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
    }

    .header h1 {
      font-size: 1.25rem;
      font-weight: 700;
      color: #fff;
      letter-spacing: 0.3px;
    }

    .header h1 span { color: #a8d8ff; font-weight: 400; }

    /* Progress Bar */
    .progress-bar {
      background: var(--card-bg);
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
      box-shadow: 0 1px 4px rgba(0,0,0,0.04);
    }

    .progress-steps {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0;
      max-width: 400px;
      margin: 0 auto;
    }

    .progress-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      flex: 0 0 auto;
      position: relative;
    }

    .progress-circle {
      width: 32px; height: 32px;
      border-radius: 50%;
      background: var(--border);
      color: var(--text-muted);
      display: flex; align-items: center; justify-content: center;
      font-size: 0.8rem;
      font-weight: 700;
      transition: all var(--transition);
      position: relative;
      z-index: 2;
    }

    .progress-step.active .progress-circle {
      background: var(--naukri-blue);
      color: #fff;
      box-shadow: 0 0 0 4px rgba(74,144,217,0.2);
    }

    .progress-step.completed .progress-circle {
      background: var(--success);
      color: #fff;
    }

    .progress-label {
      font-size: 0.65rem;
      color: var(--text-muted);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      transition: color var(--transition);
      white-space: nowrap;
    }

    .progress-step.active .progress-label { color: var(--naukri-blue); }
    .progress-step.completed .progress-label { color: var(--success); }

    .progress-line {
      width: 40px;
      height: 3px;
      background: var(--border);
      margin-bottom: 20px;
      transition: background var(--transition);
      flex-shrink: 0;
    }

    .progress-line.filled { background: var(--success); }

    /* Main Container */
    .main-container {
      flex: 1;
      width: 100%;
      max-width: 520px;
      margin: 0 auto;
      padding: 20px 16px;
      position: relative;
      overflow-x: hidden;
    }

    /* Screen transitions */
    .screen {
      display: none;
      animation: fadeSlideIn 0.4s ease-out;
    }

    .screen.active { display: block; }

    @keyframes fadeSlideIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Card */
    .card {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow);
      padding: 24px;
      margin-bottom: 16px;
    }

    .card-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .card-subtitle {
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin-bottom: 20px;
    }

    /* Form Elements */
    .form-group {
      margin-bottom: 18px;
    }

    .form-group:last-child { margin-bottom: 0; }

    .form-label {
      display: block;
      font-size: 0.82rem;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .form-label .required {
      color: var(--danger);
      margin-left: 2px;
    }

    .form-input,
    .form-select,
    .form-textarea {
      width: 100%;
      padding: 12px 14px;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      font-size: 0.95rem;
      font-family: inherit;
      color: var(--text-primary);
      background: var(--bg);
      transition: border-color var(--transition), box-shadow var(--transition);
      -webkit-appearance: none;
      appearance: none;
    }

    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
      outline: none;
      border-color: var(--naukri-blue);
      box-shadow: 0 0 0 3px rgba(74,144,217,0.15);
      background: #fff;
    }

    .form-select {
      background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%234a5568' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 14px center;
      padding-right: 40px;
    }

    .form-textarea {
      resize: vertical;
      min-height: 80px;
    }

    /* Buttons */
    .btn {
      width: 100%;
      padding: 16px 24px;
      border: none;
      border-radius: var(--radius);
      font-size: 1rem;
      font-weight: 700;
      font-family: inherit;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: all 0.2s ease;
      letter-spacing: 0.3px;
    }

    .btn:active { transform: scale(0.98); }
    .btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }

    .btn-primary {
      background: linear-gradient(135deg, var(--naukri-blue), var(--naukri-dark));
      color: #fff;
      box-shadow: 0 4px 15px rgba(74,144,217,0.4);
    }

    .btn-primary:hover:not(:disabled) {
      box-shadow: 0 6px 20px rgba(74,144,217,0.5);
    }

    .btn-success {
      background: linear-gradient(135deg, #48bb78, #38a169);
      color: #fff;
      box-shadow: 0 4px 15px rgba(72,187,120,0.4);
    }

    .btn-outline {
      background: transparent;
      color: var(--naukri-blue);
      border: 2px solid var(--naukri-blue);
    }

    .btn-lg {
      padding: 18px 24px;
      font-size: 1.05rem;
      border-radius: var(--radius-lg);
    }

    /* Camera Section */
    .camera-container {
      position: relative;
      width: 100%;
      aspect-ratio: 4/3;
      border-radius: var(--radius-lg);
      overflow: hidden;
      background: #1a202c;
      margin-bottom: 12px;
    }

    .camera-container video {
      width: 100%; height: 100%;
      object-fit: cover;
      display: block;
    }

    .camera-container.selfie video {
      transform: scaleX(-1);
    }

    .camera-container canvas {
      width: 100%; height: 100%;
      object-fit: cover;
      display: none;
    }

    .camera-overlay {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 10px;
      color: #a0aec0;
      background: rgba(26,32,44,0.8);
    }

    .camera-overlay.hidden { display: none; }

    .camera-badge {
      position: absolute;
      top: 12px;
      left: 12px;
      background: rgba(0,0,0,0.6);
      color: #fff;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Photo Preview */
    .photo-preview {
      width: 100%;
      border-radius: var(--radius);
      overflow: hidden;
      margin-bottom: 12px;
      position: relative;
    }

    .photo-preview img {
      width: 100%;
      aspect-ratio: 4/3;
      object-fit: cover;
      display: block;
    }

    .photo-preview .photo-label {
      position: absolute;
      bottom: 8px;
      left: 8px;
      background: rgba(0,0,0,0.6);
      color: #fff;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .photo-check {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 14px;
      background: var(--success-bg);
      border-radius: var(--radius);
      color: var(--success);
      font-weight: 600;
      font-size: 0.85rem;
      margin-bottom: 12px;
    }

    /* Data Review */
    .data-row {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }

    .data-row:last-child { border-bottom: none; }

    .data-icon {
      width: 36px; height: 36px;
      border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      flex-shrink: 0;
    }

    .data-icon.location { background: rgba(74,144,217,0.12); color: var(--naukri-blue); }
    .data-icon.time { background: rgba(72,187,120,0.12); color: var(--success); }
    .data-icon.date { background: rgba(159,122,234,0.12); color: #9f7aea; }

    .data-text { flex: 1; }
    .data-text .label { font-size: 0.72rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.8px; font-weight: 600; }
    .data-text .value { font-size: 0.9rem; color: var(--text-primary); margin-top: 2px; line-height: 1.4; }

    /* Checkboxes */
    .checkbox-group {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      padding: 10px 14px;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      transition: all var(--transition);
      background: var(--bg);
    }

    .checkbox-item:has(input:checked) {
      border-color: var(--naukri-blue);
      background: var(--naukri-light);
    }

    .checkbox-item input[type="checkbox"] {
      width: 18px; height: 18px;
      accent-color: var(--naukri-blue);
      cursor: pointer;
    }

    .checkbox-item span {
      font-size: 0.9rem;
      color: var(--text-primary);
    }

    /* Toggle */
    .toggle-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 14px;
      background: var(--bg);
      border-radius: var(--radius);
      border: 2px solid var(--border);
    }

    .toggle-label { font-size: 0.9rem; color: var(--text-primary); font-weight: 500; }

    .toggle {
      position: relative;
      width: 48px; height: 26px;
      cursor: pointer;
    }

    .toggle input { opacity: 0; width: 0; height: 0; }

    .toggle-slider {
      position: absolute;
      inset: 0;
      background: #cbd5e0;
      border-radius: 26px;
      transition: background var(--transition);
    }

    .toggle-slider::before {
      content: '';
      position: absolute;
      width: 20px; height: 20px;
      left: 3px; bottom: 3px;
      background: #fff;
      border-radius: 50%;
      transition: transform var(--transition);
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }

    .toggle input:checked + .toggle-slider { background: var(--naukri-blue); }
    .toggle input:checked + .toggle-slider::before { transform: translateX(22px); }

    .conditional-field {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease, margin 0.3s ease, opacity 0.3s ease;
      opacity: 0;
      margin-top: 0;
    }

    .conditional-field.show {
      max-height: 120px;
      opacity: 1;
      margin-top: 12px;
    }

    /* INR Input */
    .input-prefix {
      position: relative;
    }

    .input-prefix::before {
      content: '\20B9';
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-muted);
      font-size: 1rem;
      font-weight: 600;
    }

    .input-prefix .form-input { padding-left: 32px; }

    /* Status / Loading */
    .status-msg {
      text-align: center;
      font-size: 0.85rem;
      color: var(--text-secondary);
      padding: 8px 0;
      min-height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .spinner {
      display: inline-block;
      width: 16px; height: 16px;
      border: 2px solid var(--border);
      border-top-color: var(--naukri-blue);
      border-radius: 50%;
      animation: spin 0.7s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    /* Success Screen */
    .success-icon {
      width: 80px; height: 80px;
      margin: 0 auto 20px;
      background: linear-gradient(135deg, #48bb78, #38a169);
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 8px 25px rgba(72,187,120,0.3);
      animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    @keyframes popIn {
      from { transform: scale(0); }
      to { transform: scale(1); }
    }

    .success-title {
      text-align: center;
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .success-subtitle {
      text-align: center;
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 24px;
    }

    /* Summary Table */
    .summary-section {
      margin-bottom: 16px;
    }

    .summary-heading {
      font-size: 0.78rem;
      font-weight: 700;
      color: var(--naukri-blue);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 10px;
      padding-bottom: 6px;
      border-bottom: 2px solid var(--naukri-light);
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid var(--border);
      font-size: 0.88rem;
    }

    .summary-row:last-child { border-bottom: none; }
    .summary-row .s-label { color: var(--text-secondary); flex-shrink: 0; margin-right: 12px; }
    .summary-row .s-value { color: var(--text-primary); font-weight: 500; text-align: right; word-break: break-word; }

    .summary-photos {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 8px;
    }

    .summary-photos img {
      width: 100%;
      aspect-ratio: 4/3;
      object-fit: cover;
      border-radius: var(--radius);
    }

    .summary-photos .photo-caption {
      text-align: center;
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 4px;
    }

    /* Alerts */
    .alert {
      padding: 14px 16px;
      border-radius: var(--radius);
      font-size: 0.88rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 16px;
    }

    .alert-error {
      background: #fff5f5;
      border: 1px solid #feb2b2;
      color: var(--danger);
    }

    .alert-success {
      background: var(--success-bg);
      border: 1px solid #9ae6b4;
      color: #276749;
    }

    /* Responsive */
    @media (max-width: 380px) {
      .progress-label { font-size: 0.58rem; }
      .progress-line { width: 28px; }
      .progress-circle { width: 28px; height: 28px; font-size: 0.7rem; }
      .card { padding: 18px; }
    }
  </style>
</head>
<body>

<!-- Header -->
<div class="header">
  <div class="header-logo">
    <svg width="20" height="20" fill="none" stroke="#fff" stroke-width="2" viewBox="0 0 24 24">
      <path d="M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.745 3.745 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"/>
    </svg>
  </div>
  <h1>FieldVerify <span>| Visit Tracker</span></h1>
</div>

<!-- Progress Bar -->
<div class="progress-bar">
  <div class="progress-steps">
    <div class="progress-step active" id="prog1">
      <div class="progress-circle">1</div>
      <div class="progress-label">Pre-Visit</div>
    </div>
    <div class="progress-line" id="line1"></div>
    <div class="progress-step" id="prog2">
      <div class="progress-circle">2</div>
      <div class="progress-label">Capture</div>
    </div>
    <div class="progress-line" id="line2"></div>
    <div class="progress-step" id="prog3">
      <div class="progress-circle">3</div>
      <div class="progress-label">Report</div>
    </div>
    <div class="progress-line" id="line3"></div>
    <div class="progress-step" id="prog4">
      <div class="progress-circle">4</div>
      <div class="progress-label">Done</div>
    </div>
  </div>
</div>

<div class="main-container">

  <!-- ==================== SCREEN 1: PRE-VISIT FORM ==================== -->
  <div class="screen active" id="screen1">
    <div class="card">
      <div class="card-title">Pre-Visit Information</div>
      <div class="card-subtitle">Fill in the visit details before you begin.</div>

      <div class="form-group">
        <label class="form-label">Agent Name <span class="required">*</span></label>
        <input type="text" class="form-input" id="agentName" placeholder="Enter your full name" autocomplete="name">
      </div>

      <div class="form-group">
        <label class="form-label">Client Company Name <span class="required">*</span></label>
        <input type="text" class="form-input" id="clientCompany" placeholder="Enter company name">
      </div>

      <div class="form-group">
        <label class="form-label">Contact Person Name <span class="required">*</span></label>
        <input type="text" class="form-input" id="contactPerson" placeholder="Enter contact person name">
      </div>

      <div class="form-group">
        <label class="form-label">Contact Person Designation <span class="required">*</span></label>
        <input type="text" class="form-input" id="contactDesignation" placeholder="e.g. HR Manager, CTO">
      </div>

      <div class="form-group">
        <label class="form-label">Purpose of Visit <span class="required">*</span></label>
        <select class="form-select" id="visitPurpose">
          <option value="">Select purpose...</option>
          <option value="New Client Pitch">New Client Pitch</option>
          <option value="Account Engagement">Account Engagement</option>
          <option value="Subscription Renewal">Subscription Renewal</option>
          <option value="Issue Resolution">Issue Resolution</option>
          <option value="Product Demo">Product Demo</option>
          <option value="Relationship Building">Relationship Building</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">Pre-visit Notes <span style="color:var(--text-muted);font-weight:400;text-transform:none">(optional)</span></label>
        <textarea class="form-textarea" id="preNotes" placeholder="Any preparation notes or agenda items..."></textarea>
      </div>
    </div>

    <button class="btn btn-primary btn-lg" id="startVisitBtn" onclick="goToScreen2()">
      <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path d="M15.75 10.5l4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"/>
      </svg>
      Start Visit Verification
    </button>
  </div>

  <!-- ==================== SCREEN 2: CAPTURE & VERIFY ==================== -->
  <div class="screen" id="screen2">
    <!-- Phase A: Selfie -->
    <div id="selfiePhase">
      <div class="card">
        <div class="card-title">Capture Selfie</div>
        <div class="card-subtitle">Take a photo of yourself at the client location.</div>

        <div class="camera-container selfie" id="selfieCamera">
          <video id="selfieVideo" autoplay playsinline muted></video>
          <canvas id="selfieCanvas"></canvas>
          <div class="camera-overlay" id="selfieOverlay">
            <svg width="40" height="40" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path d="M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574v9.176A2.25 2.25 0 0 0 4.5 21h15a2.25 2.25 0 0 0 2.25-2.25V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"/>
              <path d="M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Z"/>
            </svg>
            <span>Starting front camera...</span>
          </div>
          <div class="camera-badge">
            <svg width="14" height="14" fill="currentColor" viewBox="0 0 20 20"><path d="M10 8a3 3 0 1 0 0 6 3 3 0 0 0 0-6ZM2 10a8 8 0 1 1 16 0 8 8 0 0 1-16 0Z"/></svg>
            Front Camera
          </div>
        </div>

        <button class="btn btn-primary" id="captureSelfieBtn" disabled onclick="captureSelfie()">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="4" fill="currentColor"/>
          </svg>
          Capture Selfie
        </button>
      </div>
    </div>

    <!-- Phase B: Office Photo -->
    <div id="officePhase" style="display:none">
      <div class="card">
        <div class="photo-check">
          <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
          </svg>
          Selfie captured successfully
        </div>

        <div class="card-title">Capture Office Photo</div>
        <div class="card-subtitle">Take a photo of the client's office or premises.</div>

        <div class="camera-container" id="officeCamera">
          <video id="officeVideo" autoplay playsinline muted></video>
          <canvas id="officeCanvas"></canvas>
          <div class="camera-overlay" id="officeOverlay">
            <svg width="40" height="40" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path d="M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574v9.176A2.25 2.25 0 0 0 4.5 21h15a2.25 2.25 0 0 0 2.25-2.25V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"/>
              <path d="M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Z"/>
            </svg>
            <span>Switching to rear camera...</span>
          </div>
          <div class="camera-badge">
            <svg width="14" height="14" fill="currentColor" viewBox="0 0 20 20"><path d="M4 4a2 2 0 0 0-2 2v1h16V6a2 2 0 0 0-2-2H4Zm14 5H2v5a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9Z"/></svg>
            Rear Camera
          </div>
        </div>

        <button class="btn btn-primary" id="captureOfficeBtn" disabled onclick="captureOffice()">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="4" fill="currentColor"/>
          </svg>
          Capture Office Photo
        </button>
      </div>
    </div>

    <!-- Phase C: Review -->
    <div id="reviewPhase" style="display:none">
      <div class="card">
        <div class="photo-check">
          <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
          </svg>
          All data captured
        </div>

        <div class="card-title">Review Captured Data</div>
        <div class="card-subtitle">Verify the information before proceeding.</div>

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px">
          <div class="photo-preview">
            <img id="reviewSelfie" src="" alt="Selfie">
            <div class="photo-label">Selfie</div>
          </div>
          <div class="photo-preview">
            <img id="reviewOffice" src="" alt="Office">
            <div class="photo-label">Office</div>
          </div>
        </div>

        <div class="data-row">
          <div class="data-icon location">
            <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/>
              <path d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"/>
            </svg>
          </div>
          <div class="data-text">
            <div class="label">Location</div>
            <div class="value" id="reviewLocation">Fetching location...</div>
          </div>
        </div>

        <div class="data-row">
          <div class="data-icon date">
            <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"/>
            </svg>
          </div>
          <div class="data-text">
            <div class="label">Date</div>
            <div class="value" id="reviewDate">-</div>
          </div>
        </div>

        <div class="data-row">
          <div class="data-icon time">
            <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
            </svg>
          </div>
          <div class="data-text">
            <div class="label">Time</div>
            <div class="value" id="reviewTime">-</div>
          </div>
        </div>
      </div>

      <div class="status-msg" id="locationStatus"></div>

      <button class="btn btn-primary btn-lg" onclick="goToScreen3()">
        Continue to Post-Visit Report
        <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- ==================== SCREEN 3: POST-VISIT REPORT ==================== -->
  <div class="screen" id="screen3">
    <div class="card">
      <div class="card-title">Post-Visit Report</div>
      <div class="card-subtitle">Complete the visit report with meeting details.</div>

      <div class="form-group">
        <label class="form-label">Meeting Outcome <span class="required">*</span></label>
        <select class="form-select" id="meetingOutcome">
          <option value="">Select outcome...</option>
          <option value="Positive">Positive</option>
          <option value="Neutral">Neutral</option>
          <option value="Negative">Negative</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">Products Discussed</label>
        <div class="checkbox-group">
          <label class="checkbox-item">
            <input type="checkbox" value="Job Listings">
            <span>Job Listings</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" value="Resume Database">
            <span>Resume Database</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" value="Branding Solutions">
            <span>Branding Solutions</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" value="AI Recruitment Tools">
            <span>AI Recruitment Tools</span>
          </label>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Client Sentiment <span class="required">*</span></label>
        <select class="form-select" id="clientSentiment">
          <option value="">Select sentiment...</option>
          <option value="Very Interested">Very Interested</option>
          <option value="Interested">Interested</option>
          <option value="Neutral">Neutral</option>
          <option value="Not Interested">Not Interested</option>
          <option value="Hostile">Hostile</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">Follow-up Required</label>
        <div class="toggle-container">
          <span class="toggle-label">Schedule a follow-up?</span>
          <label class="toggle">
            <input type="checkbox" id="followupToggle" onchange="toggleFollowup()">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="conditional-field" id="followupDate">
          <label class="form-label" style="margin-top:4px">Follow-up Date</label>
          <input type="date" class="form-input" id="followupDateInput">
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Estimated Deal Value (INR)</label>
        <div class="input-prefix">
          <input type="number" class="form-input" id="dealValue" placeholder="0" min="0">
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Post-visit Notes <span style="color:var(--text-muted);font-weight:400;text-transform:none">(optional)</span></label>
        <textarea class="form-textarea" id="postNotes" placeholder="Key discussion points, action items..."></textarea>
      </div>
    </div>

    <button class="btn btn-success btn-lg" id="submitReportBtn" onclick="submitReport()">
      <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path d="M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"/>
      </svg>
      Submit Visit Report
    </button>

    <div class="status-msg" id="submitStatus"></div>
  </div>

  <!-- ==================== SCREEN 4: CONFIRMATION ==================== -->
  <div class="screen" id="screen4">
    <div class="card" style="text-align:center;padding-top:32px">
      <div class="success-icon">
        <svg width="40" height="40" fill="none" stroke="#fff" stroke-width="2.5" viewBox="0 0 24 24">
          <path d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
        </svg>
      </div>
      <div class="success-title">Visit Verified!</div>
      <div class="success-subtitle">Report submitted and email sent successfully.</div>
    </div>

    <div class="card" id="summaryCard">
      <!-- Summary will be injected here -->
    </div>

    <button class="btn btn-primary btn-lg" onclick="startNewVisit()">
      <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path d="M12 4.5v15m7.5-7.5h-15"/>
      </svg>
      Start New Visit
    </button>
  </div>

</div>

<script>
  // ============ INIT ============
  emailjs.init('60PlqLIJgQQjFwTLc');

  // ============ STATE ============
  const visitData = {
    agentName: '', clientCompany: '', contactPerson: '', contactDesignation: '',
    visitPurpose: '', preNotes: '',
    selfiePhoto: '', officePhoto: '',
    location: '', latitude: '', longitude: '', date: '', time: '',
    meetingOutcome: '', productsDiscussed: [], clientSentiment: '',
    followupRequired: false, followupDate: '', dealValue: '', postNotes: ''
  };

  let selfieStream = null;
  let officeStream = null;
  let currentScreen = 1;

  // ============ PROGRESS BAR ============
  function updateProgress(step) {
    for (let i = 1; i <= 4; i++) {
      const el = document.getElementById('prog' + i);
      el.classList.remove('active', 'completed');
      if (i < step) el.classList.add('completed');
      else if (i === step) el.classList.add('active');
    }
    for (let i = 1; i <= 3; i++) {
      const line = document.getElementById('line' + i);
      line.classList.toggle('filled', i < step);
    }
  }

  // ============ SCREEN NAVIGATION ============
  function showScreen(num) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById('screen' + num).classList.add('active');
    currentScreen = num;
    updateProgress(num);
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // ============ SCREEN 1 -> 2 ============
  function goToScreen2() {
    const agentName = document.getElementById('agentName').value.trim();
    const clientCompany = document.getElementById('clientCompany').value.trim();
    const contactPerson = document.getElementById('contactPerson').value.trim();
    const contactDesignation = document.getElementById('contactDesignation').value.trim();
    const visitPurpose = document.getElementById('visitPurpose').value;

    if (!agentName || !clientCompany || !contactPerson || !contactDesignation || !visitPurpose) {
      alert('Please fill in all required fields.');
      return;
    }

    visitData.agentName = agentName;
    visitData.clientCompany = clientCompany;
    visitData.contactPerson = contactPerson;
    visitData.contactDesignation = contactDesignation;
    visitData.visitPurpose = visitPurpose;
    visitData.preNotes = document.getElementById('preNotes').value.trim();

    showScreen(2);
    startSelfieCamera();
    startLocationCapture();
  }

  // ============ CAMERA HELPERS ============
  async function startSelfieCamera() {
    try {
      selfieStream = await navigator.mediaDevices.getUserMedia({
        video: { facingMode: 'user', width: { ideal: 1280 }, height: { ideal: 960 } },
        audio: false
      });
      const video = document.getElementById('selfieVideo');
      video.srcObject = selfieStream;
      document.getElementById('selfieOverlay').classList.add('hidden');
      document.getElementById('captureSelfieBtn').disabled = false;
    } catch (err) {
      document.getElementById('selfieOverlay').querySelector('span').textContent = 'Camera access denied. Please allow camera access.';
    }
  }

  async function startOfficeCamera() {
    try {
      officeStream = await navigator.mediaDevices.getUserMedia({
        video: { facingMode: { exact: 'environment' }, width: { ideal: 1280 }, height: { ideal: 960 } },
        audio: false
      });
      const video = document.getElementById('officeVideo');
      video.srcObject = officeStream;
      document.getElementById('officeOverlay').classList.add('hidden');
      document.getElementById('captureOfficeBtn').disabled = false;
    } catch (err) {
      // Fallback: try without exact constraint (e.g. desktop)
      try {
        officeStream = await navigator.mediaDevices.getUserMedia({
          video: { facingMode: 'environment', width: { ideal: 1280 }, height: { ideal: 960 } },
          audio: false
        });
        const video = document.getElementById('officeVideo');
        video.srcObject = officeStream;
        document.getElementById('officeOverlay').classList.add('hidden');
        document.getElementById('captureOfficeBtn').disabled = false;
      } catch (err2) {
        document.getElementById('officeOverlay').querySelector('span').textContent = 'Camera access denied.';
      }
    }
  }

  function stopStream(stream) {
    if (stream) stream.getTracks().forEach(t => t.stop());
  }

  function takePhoto(videoId, canvasId) {
    const video = document.getElementById(videoId);
    const canvas = document.getElementById(canvasId);
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    const ctx = canvas.getContext('2d');
    // Mirror selfie
    if (videoId === 'selfieVideo') {
      ctx.translate(canvas.width, 0);
      ctx.scale(-1, 1);
    }
    ctx.drawImage(video, 0, 0);
    return canvas.toDataURL('image/jpeg', 0.8);
  }

  // ============ SELFIE CAPTURE ============
  function captureSelfie() {
    visitData.selfiePhoto = takePhoto('selfieVideo', 'selfieCanvas');
    stopStream(selfieStream);

    // Show office phase
    document.getElementById('selfiePhase').style.display = 'none';
    document.getElementById('officePhase').style.display = 'block';
    startOfficeCamera();
  }

  // ============ OFFICE CAPTURE ============
  function captureOffice() {
    visitData.officePhoto = takePhoto('officeVideo', 'officeCanvas');
    stopStream(officeStream);

    // Capture date/time
    const now = new Date();
    visitData.date = now.toLocaleDateString('en-IN', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
    visitData.time = now.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true });

    // Show review phase
    document.getElementById('officePhase').style.display = 'none';
    document.getElementById('reviewPhase').style.display = 'block';

    document.getElementById('reviewSelfie').src = visitData.selfiePhoto;
    document.getElementById('reviewOffice').src = visitData.officePhoto;
    document.getElementById('reviewDate').textContent = visitData.date;
    document.getElementById('reviewTime').textContent = visitData.time;
  }

  // ============ LOCATION ============
  function startLocationCapture() {
    const statusEl = document.getElementById('locationStatus');
    const locEl = document.getElementById('reviewLocation');

    if (!navigator.geolocation) {
      locEl.textContent = 'Geolocation not supported';
      return;
    }

    statusEl.innerHTML = '<span class="spinner"></span> Fetching GPS location...';

    navigator.geolocation.getCurrentPosition(
      async (pos) => {
        visitData.latitude = pos.coords.latitude;
        visitData.longitude = pos.coords.longitude;

        statusEl.innerHTML = '<span class="spinner"></span> Resolving address...';

        try {
          const res = await fetch(
            `https://nominatim.openstreetmap.org/reverse?lat=${pos.coords.latitude}&lon=${pos.coords.longitude}&format=json`,
            { headers: { 'Accept-Language': 'en' } }
          );
          const data = await res.json();
          visitData.location = data.display_name || `${pos.coords.latitude.toFixed(5)}, ${pos.coords.longitude.toFixed(5)}`;
        } catch {
          visitData.location = `${pos.coords.latitude.toFixed(5)}, ${pos.coords.longitude.toFixed(5)}`;
        }

        locEl.textContent = visitData.location;
        statusEl.innerHTML = '';
      },
      (err) => {
        locEl.textContent = 'Location unavailable';
        visitData.location = 'Location unavailable';
        statusEl.innerHTML = '';
      },
      { enableHighAccuracy: true, timeout: 20000 }
    );
  }

  // ============ SCREEN 2 -> 3 ============
  function goToScreen3() {
    showScreen(3);
    // Reset screen 2 phases for potential re-use
  }

  // ============ FOLLOW-UP TOGGLE ============
  function toggleFollowup() {
    const checked = document.getElementById('followupToggle').checked;
    document.getElementById('followupDate').classList.toggle('show', checked);
    if (!checked) document.getElementById('followupDateInput').value = '';
  }

  // ============ SCREEN 3 -> 4 (SUBMIT) ============
  async function submitReport() {
    const meetingOutcome = document.getElementById('meetingOutcome').value;
    const clientSentiment = document.getElementById('clientSentiment').value;

    if (!meetingOutcome || !clientSentiment) {
      alert('Please fill in Meeting Outcome and Client Sentiment.');
      return;
    }

    visitData.meetingOutcome = meetingOutcome;
    visitData.clientSentiment = clientSentiment;
    visitData.followupRequired = document.getElementById('followupToggle').checked;
    visitData.followupDate = document.getElementById('followupDateInput').value;
    visitData.dealValue = document.getElementById('dealValue').value;
    visitData.postNotes = document.getElementById('postNotes').value.trim();

    // Gather checked products
    visitData.productsDiscussed = [];
    document.querySelectorAll('#screen3 .checkbox-group input[type="checkbox"]:checked').forEach(cb => {
      visitData.productsDiscussed.push(cb.value);
    });

    const btn = document.getElementById('submitReportBtn');
    const statusEl = document.getElementById('submitStatus');
    btn.disabled = true;
    statusEl.innerHTML = '<span class="spinner"></span> Sending report via email...';

    try {
      const followupText = visitData.followupRequired
        ? `Yes - ${visitData.followupDate || 'Date TBD'}`
        : 'No';

      const dealText = visitData.dealValue
        ? `\u20B9${Number(visitData.dealValue).toLocaleString('en-IN')}`
        : 'Not specified';

      const emailBody = `
--- FIELD VISIT REPORT ---

PRE-VISIT DETAILS:
Agent Name: ${visitData.agentName}
Client Company: ${visitData.clientCompany}
Contact Person: ${visitData.contactPerson}
Designation: ${visitData.contactDesignation}
Purpose: ${visitData.visitPurpose}
Pre-visit Notes: ${visitData.preNotes || 'None'}

VISIT VERIFICATION:
Date: ${visitData.date}
Time: ${visitData.time}
Location: ${visitData.location}
GPS: ${visitData.latitude}, ${visitData.longitude}

POST-VISIT REPORT:
Meeting Outcome: ${visitData.meetingOutcome}
Products Discussed: ${visitData.productsDiscussed.join(', ') || 'None'}
Client Sentiment: ${visitData.clientSentiment}
Follow-up Required: ${followupText}
Estimated Deal Value: ${dealText}
Post-visit Notes: ${visitData.postNotes || 'None'}
      `.trim();

      await emailjs.send('service_prariyq', 'template_a4zifcf', {
        agent_name: visitData.agentName,
        client_company: visitData.clientCompany,
        contact_person: visitData.contactPerson,
        contact_designation: visitData.contactDesignation,
        visit_purpose: visitData.visitPurpose,
        pre_visit_notes: visitData.preNotes || 'None',
        location: visitData.location,
        visit_date: visitData.date,
        visit_time: visitData.time,
        gps_coordinates: `${visitData.latitude}, ${visitData.longitude}`,
        meeting_outcome: visitData.meetingOutcome,
        products_discussed: visitData.productsDiscussed.join(', ') || 'None',
        client_sentiment: visitData.clientSentiment,
        follow_up_required: followupText,
        follow_up_date: visitData.followupDate || 'N/A',
        deal_value: dealText,
        post_visit_notes: visitData.postNotes || 'None'
      });

      statusEl.innerHTML = '';
      showScreen(4);
      renderSummary();
    } catch (err) {
      statusEl.innerHTML = `<span style="color:var(--danger)">Failed to send email: ${err.text || err.message || 'Unknown error'}. Please try again.</span>`;
      btn.disabled = false;
    }
  }

  // ============ SUMMARY ============
  function renderSummary() {
    const followupText = visitData.followupRequired
      ? `Yes - ${visitData.followupDate || 'Date TBD'}`
      : 'No';
    const dealText = visitData.dealValue
      ? `\u20B9${Number(visitData.dealValue).toLocaleString('en-IN')}`
      : 'Not specified';

    document.getElementById('summaryCard').innerHTML = `
      <div class="summary-section">
        <div class="summary-heading">Visit Photos</div>
        <div class="summary-photos">
          <div>
            <img src="${visitData.selfiePhoto}" alt="Selfie">
            <div class="photo-caption">Agent Selfie</div>
          </div>
          <div>
            <img src="${visitData.officePhoto}" alt="Office">
            <div class="photo-caption">Office Photo</div>
          </div>
        </div>
      </div>

      <div class="summary-section">
        <div class="summary-heading">Pre-Visit Details</div>
        <div class="summary-row"><span class="s-label">Agent</span><span class="s-value">${visitData.agentName}</span></div>
        <div class="summary-row"><span class="s-label">Company</span><span class="s-value">${visitData.clientCompany}</span></div>
        <div class="summary-row"><span class="s-label">Contact</span><span class="s-value">${visitData.contactPerson}</span></div>
        <div class="summary-row"><span class="s-label">Designation</span><span class="s-value">${visitData.contactDesignation}</span></div>
        <div class="summary-row"><span class="s-label">Purpose</span><span class="s-value">${visitData.visitPurpose}</span></div>
        ${visitData.preNotes ? `<div class="summary-row"><span class="s-label">Notes</span><span class="s-value">${visitData.preNotes}</span></div>` : ''}
      </div>

      <div class="summary-section">
        <div class="summary-heading">Verification Data</div>
        <div class="summary-row"><span class="s-label">Date</span><span class="s-value">${visitData.date}</span></div>
        <div class="summary-row"><span class="s-label">Time</span><span class="s-value">${visitData.time}</span></div>
        <div class="summary-row"><span class="s-label">Location</span><span class="s-value">${visitData.location}</span></div>
      </div>

      <div class="summary-section">
        <div class="summary-heading">Post-Visit Report</div>
        <div class="summary-row"><span class="s-label">Outcome</span><span class="s-value">${visitData.meetingOutcome}</span></div>
        <div class="summary-row"><span class="s-label">Products</span><span class="s-value">${visitData.productsDiscussed.join(', ') || 'None'}</span></div>
        <div class="summary-row"><span class="s-label">Sentiment</span><span class="s-value">${visitData.clientSentiment}</span></div>
        <div class="summary-row"><span class="s-label">Follow-up</span><span class="s-value">${followupText}</span></div>
        <div class="summary-row"><span class="s-label">Deal Value</span><span class="s-value">${dealText}</span></div>
        ${visitData.postNotes ? `<div class="summary-row"><span class="s-label">Notes</span><span class="s-value">${visitData.postNotes}</span></div>` : ''}
      </div>
    `;
  }

  // ============ NEW VISIT ============
  function startNewVisit() {
    // Reset all form fields
    document.getElementById('agentName').value = '';
    document.getElementById('clientCompany').value = '';
    document.getElementById('contactPerson').value = '';
    document.getElementById('contactDesignation').value = '';
    document.getElementById('visitPurpose').value = '';
    document.getElementById('preNotes').value = '';
    document.getElementById('meetingOutcome').value = '';
    document.getElementById('clientSentiment').value = '';
    document.getElementById('followupToggle').checked = false;
    document.getElementById('followupDate').classList.remove('show');
    document.getElementById('followupDateInput').value = '';
    document.getElementById('dealValue').value = '';
    document.getElementById('postNotes').value = '';
    document.querySelectorAll('#screen3 .checkbox-group input[type="checkbox"]').forEach(cb => cb.checked = false);

    // Reset screen 2 phases
    document.getElementById('selfiePhase').style.display = 'block';
    document.getElementById('officePhase').style.display = 'none';
    document.getElementById('reviewPhase').style.display = 'none';
    document.getElementById('captureSelfieBtn').disabled = true;
    document.getElementById('captureOfficeBtn').disabled = true;
    document.getElementById('selfieOverlay').classList.remove('hidden');
    document.getElementById('officeOverlay').classList.remove('hidden');
    document.getElementById('submitReportBtn').disabled = false;
    document.getElementById('submitStatus').innerHTML = '';
    document.getElementById('locationStatus').innerHTML = '';

    // Reset state
    Object.keys(visitData).forEach(k => {
      if (Array.isArray(visitData[k])) visitData[k] = [];
      else if (typeof visitData[k] === 'boolean') visitData[k] = false;
      else visitData[k] = '';
    });

    showScreen(1);
  }
</script>

</body>
</html>
